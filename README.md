# AI-Detection-Extension

This project is a Google Chrome extension designed to analyze text on web pages to determine the likelihood of it being generated by Artificial Intelligence. It leverages a local installation of Ollama to perform Optical Character Recognition (OCR) and textual analysis, ensuring data privacy and offline capability.

## Architecture

The extension is built on the Manifest V3 architecture:
*   **Popup (UI):** User interface for capturing context and displaying results.
*   **Service Worker:** Orchestrates background tasks, API calls to Ollama, and state management.
*   **Content Script:** Handles DOM interaction for selecting screen areas.
*   **Offscreen Document:** Manages image processing (cropping) required by Manifest V3 restrictions.

## Prerequisites

Before installing the extension, ensure the following requirements are met:

1.  **Google Chrome** (or a Chromium-based browser like Edge or Brave).
2.  **Ollama** installed locally. [Download Ollama](https://ollama.com).

## Ollama Configuration

The extension communicates with the Ollama API running at `http://localhost:11434`.

### Install Required Models
The extension is configured to use the `gemma3` model family by default. You must pull these models to your local machine.

Open a terminal and run:

```bash
ollama pull gemma3
```

*Note: You may also pull `gemma3:12b` or `gemma3:27b` if your hardware supports larger models, as the extension allows model selection in the UI.*

## Installation

1.  **Clone or Download the Repository**
    Clone this repository to a local directory on your machine.
    ```bash
    git clone https://github.com/VictorFleiser/AI-Detection-Extension/tree/main
    ```

2.  **Load into Chrome**
    *   Open Chrome and navigate to `chrome://extensions/`.
    *   Enable **Developer mode** (toggle in the top right corner).
    *   Click **Load unpacked**.
    *   Select the extension directory of this project (containing `manifest.json`).

## Usage

1.  **Navigate** to a web page containing text you wish to analyze (e.g., Reddit, Twitter/X).
2.  **Open the Extension** by clicking the icon in the browser toolbar.
3.  **Step 1: Capture Context**
    *   Click "Capture Context Image".
    *   Use the crosshair cursor to draw a box around the text and its surrounding visual context (username, layout, etc.).
4.  **Step 2: Extract Text**
    *   Click "Extract or Paste Text".
    *   Draw a box specifically around the text content to analyze.
    *   The local LLM will perform OCR. You can manually edit the extracted text in the text area if necessary.
5.  **Step 3: Evaluate**
    *   Click "Evaluate Text".
    *   The system will send the text and visual context to the local LLM.
    *   A report will appear showing the probability of AI generation and a detailed linguistic analysis.

## Experimental Features

This repository contains an experimental module (`create_tabs.js` and `posts.json`) designed for user studies.

*   **Function:** On specific supported sites (Reddit, X.com, JeuxVideo.com), the extension can dynamically replace post content with AI-generated text or Human text defined in `posts.json`.
*   **Logging:** User decisions and analysis results are stored locally in Chrome Storage.
*   **Export:** Logs can be downloaded as a CSV file via the "Download CSV" button in the extension popup for analysis.

## Project Structure

*   `manifest.json`: Extension configuration.
*   `background.js`: Main logic, API handling, and storage management.
*   `content.js`: Handles the visual selection overlay on web pages.
*   `popup.html` / `popup.js`: The user interface.
*   `offscreen.html` / `offscreen.js`: Handles image cropping logic.
*   `posts.json`: Dataset for the experimental comparison module.
*   `AI_posts_script.py`: Python utility used to generate the AI variants of posts found in `posts.json`.


This experimental extension was created for the HAII course of the AI2D master at Sorbonne University

