<!-- popup.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AI Text Detector</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Start Button Container (shown on certain sites) -->
  <div id="startContainer" style="display: none;">
    <div class="start-screen">
      <h2>AI Generation Detector</h2>
      <p>Ready to analyze content on this page</p>
      <button id="startBtn" class="start-button">Start</button>
    </div>
  </div>
  
  <!-- Main Content (hidden initially on certain sites) -->
  <div id="mainContent">
  <div class="header" id="ai-detector-header">
    <button id="createTabs">createTabs</button>
    <h3>AI Generation Detector</h3>
    <div class="model-selector-container">
      <label for="modelSelector">Model:</label>
      <select id="modelSelector">
        <option value="gemma3">Gemma 3 4B</option>
        <option value="gemma3:12b">Gemma 3 12B</option>
        <option value="gemma3:27b">Gemma 3 27B</option>
      </select>
    </div>
  </div>
  <div class="debug-container" id="debug-checkboxes">
    <input type="checkbox" id="debugModeCheckbox">
    <label for="debugModeCheckbox">Download Captures</label>
  </div>
  <div class="debug-container" id="stored-llm-checkbox">
    <input type="checkbox" id="useStoredLLMCheckbox">
    <label for="useStoredLLMCheckbox">Use Stored LLM Responses</label>
  </div>
  <div class="debug-container" id="user-alone-checkbox">
    <input type="checkbox" id="userAloneCheckbox">
    <label for="userAloneCheckbox">User Alone</label>
  </div>
  <div id="status">Status: Idle</div>

  <hr>

  <div class="step" id="step-capture">
    <div class="context-controls">
      <button id="captureContextBtn">1. Capture Context Image</button>
      <div class="step-status" id="contextStatus">Not captured</div>
      <button id="resetContextBtn" title="Clear captured context" class="reset-btn" hidden>&#x21BA;</button>
    </div>
  </div>

  <div class="step" id="step-extract">
    <button id="extractTextBtn">2. Extract or Paste Text</button>
    <textarea id="extractedText" placeholder="Text extracted by Ollama will appear here, or you can paste your own..."></textarea>
  </div>
  
  <div class="step" id="step-evaluate">
    <button id="evaluateBtn" disabled>3. Evaluate Text</button>
    <div id="result-container">
        <div id="result"></div>
        <div id="conclusion-container" style="display:none; margin-top: 15px;">
            <h4 style="margin-bottom: 8px; color: #333;">CONCLUSION</h4>
            <div id="conclusion-text" style="font-style: italic; padding: 10px; background-color: #f8f9fa; border-left: 3px solid #007bff; border-radius: 4px;"></div>
        </div>
    </div>
  </div>

  <div class="header">
    <h3>Decision utilisateur</h3>
  </div>

  <div class="step" id="judgement-section" style="display:none; margin-top:10px;">
    <label>Is this text AI?</label>
    <div class="radio-group" id="aiJudgementGroup">
      <label><input type="radio" name="aiJudgement" value="yes"> Yes</label>
      <label><input type="radio" name="aiJudgement" value="no"> No</label>
    </div>
  </div>

  <div class="step" id="confidence-section" style="display:none; margin-top:15px;">
    <label for="confidenceRadios">Your Confidence in your answer:</label>
    <div id="confidence-container" class="radio-group" aria-label="AI confidence" >
      <label><input type="radio" name="confidenceRadio" value="0"> 0%</label>
      <label><input type="radio" name="confidenceRadio" value="10"> 10%</label>
      <label><input type="radio" name="confidenceRadio" value="20"> 20%</label>
      <label><input type="radio" name="confidenceRadio" value="30"> 30%</label>
      <label><input type="radio" name="confidenceRadio" value="40"> 40%</label>
      <label><input type="radio" name="confidenceRadio" value="50"> 50%</label>
      <label><input type="radio" name="confidenceRadio" value="60"> 60%</label>
      <label><input type="radio" name="confidenceRadio" value="70"> 70%</label>
      <label><input type="radio" name="confidenceRadio" value="80"> 80%</label>
      <label><input type="radio" name="confidenceRadio" value="90"> 90%</label>
      <label><input type="radio" name="confidenceRadio" value="100"> 100%</label>
    </div>
  </div>

  <div class="step" id="confirm-section" style="display:none; margin-top:10px;">
    <button id="confirmFeedbackBtn" class="primary-btn">Confirm</button>
  </div>

  <hr>
  <div class="log-management">
      <div id="logCount">Logs: 0</div>
      <div class="log-btns">
          <button id="downloadLogsBtn" class="secondary-btn">Download CSV</button>
          <button id="clearLogsBtn" class="reset-btn" title="Clear All Logs">üóëÔ∏è</button>
      </div>
  </div>

  <script src="showdown.min.js"></script>
  <script src="popup.js"></script>
  </div> <!-- End mainContent -->
</body>
</html>